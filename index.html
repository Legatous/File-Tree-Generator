<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>File Structure to ZIP</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
</head>
<body>

    <h2>Generate ZIP File from File Structure</h2>
    <p>Enter a space-separated file and folder structure.</p>

    <textarea id="inputText" placeholder="Enter structure like: frontend src App.jsx main.jsx components TradeList.jsx"></textarea>
    <br>
    <button onclick="generateZip()">Generate ZIP</button>
    <button id="downloadBtn" style="display:none;" onclick="downloadZip()">Download ZIP</button>

    <script>
        let generatedZip = null;

        function parseStructure(text) {
            let words = text.split(/\s+/);
            let structure = {};
            let currentPath = [];

            words.forEach(word => {
                if (!word.includes('.')) {
                    // It's a folder
                    currentPath.push(word);
                    let currentFolder = structure;
                    for (let folder of currentPath) {
                        if (!currentFolder[folder]) currentFolder[folder] = {};
                        currentFolder = currentFolder[folder];
                    }
                } else {
                    // It's a file
                    let currentFolder = structure;
                    for (let folder of currentPath) {
                        currentFolder = currentFolder[folder];
                    }
                    currentFolder[word] = ''; // Empty file
                }
            });

            return structure;
        }

        function addFilesToZip(zip, structure, path = "") {
            for (let key in structure) {
                let newPath = path ? `${path}/${key}` : key;
                if (typeof structure[key] === "object") {
                    addFilesToZip(zip.folder(key), structure[key], newPath);
                } else {
                    zip.file(newPath, ""); // Create an empty file
                }
            }
        }

        function generateZip() {
            let inputText = document.getElementById("inputText").value.trim();
            let parsedStructure = parseStructure(inputText);
            let zip = new JSZip();
            addFilesToZip(zip, parsedStructure);

            zip.generateAsync({ type: "blob" }).then(function (blob) {
                generatedZip = blob;
                document.getElementById("downloadBtn").style.display = "inline"; // Show download button
            });
        }

        function downloadZip() {
            if (!generatedZip) return;
            let link = document.createElement("a");
            link.href = URL.createObjectURL(generatedZip);
            link.download = "project.zip";
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }
    </script>

</body>
</html>
